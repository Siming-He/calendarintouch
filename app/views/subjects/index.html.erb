<p id="notice"><%= notice %></p>
<h1>Subjects</h1>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @subjects.each do |subject| %>
      <% if current_user.email != subject.owneremail && !subject.private %>
        <% if Registration.where(subject_id: subject.id).find_by(user_id: current_user.id).nil? %>
          <tr>
            <td><%= subject.name %></td>
            <td><%= subject.description %></td>
            <td><%= link_to 'Show', subject %></td>
            <td>
              <a href="/add_subject/<%= current_user.id %>/<%= subject.id %>">
                  <button type="button" class="btn btn-outline-secondary">Add</button>
              </a>
            </td>
          </tr>
        <% else %>
          <tr>
            <td><%= subject.name %></td>
            <td><%= subject.description %></td>
            <td><%= link_to 'Show', subject %></td>
            <td>
              <a href="/drop_subject/<%= current_user.id %>/<%= subject.id %>">
                  <button type="button" class="btn btn-outline-secondary">Drop</button>
              </a>
            </td>
          </tr>
        <% end %>
      <% elsif current_user.email == subject.owneremail %>  
        <tr>
            <td><%= subject.name %></td>
            <td><%= subject.description %></td>
            <td><%= link_to 'Show', subject %></td>
            <td><%= link_to 'Edit', edit_subject_path(subject) %></td>
            <td><%= link_to 'Destroy', subject, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Subject', new_subject_path %>
